<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wildfire Prediction System | Dashboard</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body class="bg-dark text-light">

    <div class="d-flex" id="wrapper">
        <!-- Sidebar -->
        <div class="bg-sidebar border-end border-secondary" id="sidebar-wrapper">
            <div
                class="sidebar-heading text-center py-4 primary-text fs-4 fw-bold text-uppercase border-bottom border-secondary">
                <i class="fas fa-fire-alt me-2 text-danger"></i>WildFire AI
            </div>
            <div class="list-group list-group-flush my-3">
                <a href="#" class="list-group-item list-group-item-action bg-transparent second-text active"
                    data-section="dashboard">
                    <i class="fas fa-tachometer-alt me-2"></i>Dashboard
                </a>
                <a href="#" class="list-group-item list-group-item-action bg-transparent second-text"
                    data-section="data-collection">
                    <i class="fas fa-database me-2"></i>Data Collection
                </a>
                <a href="#" class="list-group-item list-group-item-action bg-transparent second-text"
                    data-section="preprocessing">
                    <i class="fas fa-microchip me-2"></i>Data Preprocessing
                </a>
                <a href="#" class="list-group-item list-group-item-action bg-transparent second-text"
                    data-section="prediction">
                    <i class="fas fa-brain me-2"></i>Prediction
                </a>
                <a href="#" class="list-group-item list-group-item-action bg-transparent second-text"
                    data-section="visualization">
                    <i class="fas fa-chart-line me-2"></i>Visualization
                </a>
                <a href="/logout" id="logout-btn"
                    class="list-group-item list-group-item-action bg-transparent second-text text-danger fw-bold mt-5">
                    <i class="fas fa-sign-out-alt me-2"></i>Logout
                </a>
            </div>
        </div>
        <!-- /#sidebar-wrapper -->

        <!-- Page Content -->
        <div id="page-content-wrapper">
            <nav class="navbar navbar-expand-lg navbar-dark bg-transparent py-4 px-4">
                <div class="d-flex align-items-center">
                    <i class="fas fa-align-left fs-4 me-3" id="menu-toggle"></i>
                    <h2 class="fs-2 m-0" id="section-title">Dashboard</h2>
                </div>
            </nav>

            <div class="container-fluid px-4">
                <!-- Dashboard Overview Section -->
                <div id="dashboard-section" class="content-section">
                    <div class="row g-3 my-2">
                        <div class="col-md-3">
                            <div
                                class="p-3 bg-card shadow-sm d-flex justify-content-around align-items-center rounded border-left-danger">
                                <div>
                                    <h3 class="fs-2" id="stat-active-fires">12</h3>
                                    <p class="fs-5">Active Hotspots</p>
                                </div>
                                <i class="fas fa-fire fs-1 primary-text border rounded-full secondary-bg p-3"></i>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div
                                class="p-3 bg-card shadow-sm d-flex justify-content-around align-items-center rounded border-left-warning">
                                <div>
                                    <h3 class="fs-2" id="stat-risk-level">Moderate</h3>
                                    <p class="fs-5">Global Risk</p>
                                </div>
                                <i
                                    class="fas fa-exclamation-triangle fs-1 primary-text border rounded-full secondary-bg p-3"></i>
                            </div>
                        </div>


                        <div class="col-md-3">
                            <div
                                class="p-3 bg-card shadow-sm d-flex justify-content-around align-items-center rounded border-left-success">
                                <div>
                                    <h3 class="fs-2">94%</h3>
                                    <p class="fs-5">Model Accuracy</p>
                                </div>
                                <i
                                    class="fas fa-check-circle fs-1 primary-text border rounded-full secondary-bg p-3"></i>
                            </div>
                        </div>
                    </div>

                    <div class="row my-5">
                        <h3 class="fs-4 mb-3">Real-time Weather Parameters</h3>
                        <div class="col">
                            <div class="bg-card p-4 rounded shadow-sm">
                                <canvas id="weatherChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Data Collection Section -->
                <div id="data-collection-section" class="content-section d-none">
                    <div class="row justify-content-center">
                        <div class="col-md-8">
                            <div class="bg-card p-4 rounded shadow-sm h-100">
                                <h4 class="mb-4"><i class="fas fa-satellite me-2"></i>Fetch Live Satellite Data</h4>
                                <form id="fetch-form">
                                    <div class="mb-3">
                                        <label class="form-label">Region</label>
                                        <select class="form-select bg-dark text-light border-secondary" id="region">
                                            <option value="Maharashtra">Maharashtra</option>
                                            <option value="Madhya Pradesh">Madhya Pradesh</option>
                                            <option value="Chhattisgarh">Chhattisgarh</option>
                                            <option value="Odisha">Odisha</option>
                                            <option value="Gujarat">Gujarat</option>
                                            <option value="Rajasthan">Rajasthan</option>
                                            <option value="Karnataka">Karnataka</option>
                                            <option value="Telangana">Telangana</option>
                                            <option value="Andhra Pradesh">Andhra Pradesh</option>
                                            <option value="Kerala">Kerala</option>
                                            <option value="Tamil Nadu">Tamil Nadu</option>
                                        </select>
                                    </div>
                                    <div class="row">
                                        <div class="col-6 mb-3">
                                            <label class="form-label">From Date</label>
                                            <input type="date" class="form-control bg-dark text-light border-secondary"
                                                id="from_date">
                                        </div>
                                        <div class="col-6 mb-3">
                                            <label class="form-label">To Date</label>
                                            <input type="date" class="form-control bg-dark text-light border-secondary"
                                                id="to_date">
                                        </div>
                                    </div>
                                    <button type="submit" class="btn btn-primary w-100">Fetch Live Data</button>
                                </form>
                                <div id="fetch-status" class="mt-3"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Prediction Section -->
                <div id="prediction-section" class="content-section d-none">
                    <div class="row justify-content-center">
                        <div class="col-md-8">
                            <div class="bg-card p-5 rounded shadow-sm text-center">
                                <h4 class="mb-4">Run Wildfire Risk Prediction</h4>
                                <p class="text-secondary mb-4">The AI model analyzes current weather and satellite
                                    parameters to estimate fire risk.</p>
                                <div class="row mb-4 text-start">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Temperature (Â°C)</label>
                                        <input type="number" class="form-control bg-dark text-light border-secondary"
                                            id="pred-temp" value="35">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Humidity (%)</label>
                                        <input type="number" class="form-control bg-dark text-light border-secondary"
                                            id="pred-humidity" value="20">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Wind Speed (km/h)</label>
                                        <input type="number" class="form-control bg-dark text-light border-secondary"
                                            id="pred-wind" value="25">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Rainfall (mm)</label>
                                        <input type="number" class="form-control bg-dark text-light border-secondary"
                                            id="pred-rain" value="0">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">NDVI (Vegetation)</label>
                                        <input type="number" step="0.01"
                                            class="form-control bg-dark text-light border-secondary" id="pred-ndvi"
                                            value="0.75">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Alert Phone Number</label>
                                        <input type="text" class="form-control bg-dark text-light border-secondary"
                                            id="pred-phone" value="8591556205">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Historical Fire Area</label>
                                        <select class="form-select bg-dark text-light border-secondary" id="pred-hist">
                                            <option value="1">Yes</option>
                                            <option value="0">No</option>
                                        </select>
                                    </div>
                                </div>
                                <button id="run-prediction" class="btn btn-danger btn-lg px-5">Analyze Risk</button>

                                <div id="prediction-result" class="mt-5 d-none">
                                    <div id="risk-alert" class="alert px-5 py-4 rounded-pill d-inline-block">
                                        <h2 id="risk-text" class="m-0 fw-bold">LOW RISK</h2>
                                    </div>
                                    <p class="mt-3 fs-5">Confidence Score: <span id="confidence-text"
                                            class="fw-bold">0%</span></p>
                                    <p id="sms-status-text" class="text-info mt-2"></p>
                                    <p id="tg-status-text" class="text-primary mt-1 small"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Visualization Section -->
                <div id="visualization-section" class="content-section d-none">
                    <div class="row g-4">
                        <div class="col-md-6">
                            <div class="bg-card p-4 rounded shadow-sm">
                                <h5>Fire Risk Trend</h5>
                                <canvas id="riskTrendChart"></canvas>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="bg-card p-4 rounded shadow-sm">
                                <h5>Feature Importance</h5>
                                <canvas id="importanceChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</body>

</html>